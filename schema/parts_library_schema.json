{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PartsLibrary",
  "description": "Ceradon Architect Parts Library schema v1.0.0. COTS component catalog for offline platform design.",
  "type": "object",
  "properties": {
    "schemaVersion": {
      "type": "string",
      "description": "Semantic version of the Parts Library schema",
      "default": "1.0.0"
    },
    "catalogId": {
      "type": "string",
      "description": "Unique identifier for this parts catalog"
    },
    "meta": {
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "description": { "type": "string" },
        "unit": { "type": "string", "description": "Unit or organization that owns this catalog" },
        "lastUpdated": { "type": "string", "format": "date-time" },
        "inventoryReference": { "type": "string" }
      }
    },
    "airframes": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "type", "weight_g"],
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "type": {
            "type": "string",
            "enum": ["fixed-wing", "multi-rotor", "vtol", "ground", "surface"]
          },
          "weight_g": { "type": "number", "minimum": 0 },
          "max_payload_g": { "type": "number", "minimum": 0 },
          "dimensions_mm": {
            "type": "object",
            "properties": {
              "length": { "type": "number" },
              "width": { "type": "number" },
              "height": { "type": "number" }
            }
          },
          "motor_count": { "type": "integer", "minimum": 0 },
          "motor_size": { "type": "string", "description": "e.g., 2206, 2207, 1806" },
          "prop_size": { "type": "string", "description": "e.g., 5x4.3, 7x3.5" },
          "material": { "type": "string", "description": "e.g., carbon fiber, 3D-printed PLA" },
          "printable": { "type": "boolean", "description": "Is this a 3D-printable design?" },
          "stl_file": { "type": "string", "description": "Path to STL file if printable" },
          "manufacturer": { "type": "string" },
          "part_number": { "type": "string" },
          "nsn": { "type": "string", "description": "NATO Stock Number" },
          "cost_usd": { "type": "number", "minimum": 0 },
          "availability": {
            "type": "string",
            "enum": ["in-stock", "on-order", "unavailable", "discontinued"]
          },
          "notes": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "motors": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "kv", "weight_g", "max_thrust_g"],
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "size": { "type": "string", "description": "e.g., 2207, 2806" },
          "kv": { "type": "integer", "description": "RPM per volt" },
          "weight_g": { "type": "number", "minimum": 0 },
          "max_current_a": { "type": "number", "minimum": 0 },
          "max_power_w": { "type": "number", "minimum": 0 },
          "max_thrust_g": { "type": "number", "minimum": 0, "description": "Maximum thrust output" },
          "voltage_range": {
            "type": "object",
            "properties": {
              "min_v": { "type": "number" },
              "max_v": { "type": "number" }
            }
          },
          "prop_size_range": { "type": "string", "description": "Compatible prop sizes" },
          "manufacturer": { "type": "string" },
          "part_number": { "type": "string" },
          "cost_usd": { "type": "number", "minimum": 0 },
          "availability": {
            "type": "string",
            "enum": ["in-stock", "on-order", "unavailable", "discontinued"]
          },
          "notes": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "escs": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "max_current_a", "weight_g"],
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "max_current_a": { "type": "number", "minimum": 0 },
          "weight_g": { "type": "number", "minimum": 0 },
          "voltage_range": {
            "type": "object",
            "properties": {
              "min_v": { "type": "number" },
              "max_v": { "type": "number" }
            }
          },
          "firmware": { "type": "string", "description": "e.g., BLHeli_32, KISS" },
          "protocols": {
            "type": "array",
            "items": { "type": "string" },
            "description": "e.g., DShot600, PWM"
          },
          "integrated": { "type": "boolean", "description": "4-in-1 ESC?" },
          "manufacturer": { "type": "string" },
          "part_number": { "type": "string" },
          "cost_usd": { "type": "number", "minimum": 0 },
          "availability": {
            "type": "string",
            "enum": ["in-stock", "on-order", "unavailable", "discontinued"]
          },
          "notes": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "batteries": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "chemistry", "voltage_nominal_v", "capacity_mah", "weight_g"],
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "chemistry": {
            "type": "string",
            "enum": ["LiPo", "Li-ion", "LiFe", "NiMH", "Lead-acid"]
          },
          "cells": { "type": "integer", "minimum": 1 },
          "voltage_nominal_v": { "type": "number", "minimum": 0 },
          "capacity_mah": { "type": "number", "minimum": 0 },
          "capacity_wh": { "type": "number", "minimum": 0, "description": "Calculated or measured" },
          "weight_g": { "type": "number", "minimum": 0 },
          "c_rating": { "type": "number", "minimum": 0, "description": "Discharge rate multiplier" },
          "max_discharge_a": { "type": "number", "minimum": 0 },
          "connector_type": { "type": "string", "description": "e.g., XT60, XT30, Deans" },
          "dimensions_mm": {
            "type": "object",
            "properties": {
              "length": { "type": "number" },
              "width": { "type": "number" },
              "height": { "type": "number" }
            }
          },
          "temperature_range_c": {
            "type": "object",
            "properties": {
              "min": { "type": "number" },
              "max": { "type": "number" }
            }
          },
          "manufacturer": { "type": "string" },
          "part_number": { "type": "string" },
          "cost_usd": { "type": "number", "minimum": 0 },
          "availability": {
            "type": "string",
            "enum": ["in-stock", "on-order", "unavailable", "discontinued"]
          },
          "notes": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "flight_controllers": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "weight_g"],
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "weight_g": { "type": "number", "minimum": 0 },
          "processor": { "type": "string" },
          "firmware": {
            "type": "array",
            "items": { "type": "string" },
            "description": "e.g., Betaflight, ArduPilot, PX4"
          },
          "gyro": { "type": "string" },
          "voltage_input_v": {
            "type": "object",
            "properties": {
              "min": { "type": "number" },
              "max": { "type": "number" }
            }
          },
          "current_draw_ma": { "type": "number", "minimum": 0 },
          "uart_ports": { "type": "integer", "minimum": 0 },
          "features": {
            "type": "array",
            "items": { "type": "string" },
            "description": "e.g., GPS, Barometer, OSD"
          },
          "manufacturer": { "type": "string" },
          "part_number": { "type": "string" },
          "cost_usd": { "type": "number", "minimum": 0 },
          "availability": {
            "type": "string",
            "enum": ["in-stock", "on-order", "unavailable", "discontinued"]
          },
          "notes": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "radios": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "type", "frequency_band", "weight_g"],
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "type": {
            "type": "string",
            "enum": ["control", "video", "telemetry", "mesh", "relay"]
          },
          "frequency_band": {
            "type": "string",
            "description": "e.g., 2.4GHz, 5.8GHz, 900MHz, 433MHz"
          },
          "frequency_range_mhz": {
            "type": "object",
            "properties": {
              "min": { "type": "number" },
              "max": { "type": "number" }
            }
          },
          "weight_g": { "type": "number", "minimum": 0 },
          "power_output_mw": { "type": "number", "minimum": 0 },
          "power_consumption_w": { "type": "number", "minimum": 0 },
          "range_m": { "type": "number", "minimum": 0, "description": "Line-of-sight range" },
          "data_rate_kbps": { "type": "number", "minimum": 0 },
          "antenna_connector": { "type": "string" },
          "protocols": {
            "type": "array",
            "items": { "type": "string" },
            "description": "e.g., SBUS, CRSF, MAVLink, LoRa"
          },
          "voltage_input_v": {
            "type": "object",
            "properties": {
              "min": { "type": "number" },
              "max": { "type": "number" }
            }
          },
          "manufacturer": { "type": "string" },
          "part_number": { "type": "string" },
          "cost_usd": { "type": "number", "minimum": 0 },
          "availability": {
            "type": "string",
            "enum": ["in-stock", "on-order", "unavailable", "discontinued"]
          },
          "notes": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "sensors": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "type", "weight_g"],
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "type": {
            "type": "string",
            "enum": ["camera", "lidar", "gps", "imu", "magnetometer", "barometer", "other"]
          },
          "weight_g": { "type": "number", "minimum": 0 },
          "power_consumption_w": { "type": "number", "minimum": 0 },
          "voltage_input_v": {
            "type": "object",
            "properties": {
              "min": { "type": "number" },
              "max": { "type": "number" }
            }
          },
          "resolution": { "type": "string", "description": "For cameras/sensors with resolution specs" },
          "fov_degrees": { "type": "number", "description": "Field of view for cameras" },
          "interface": {
            "type": "string",
            "description": "e.g., UART, SPI, I2C, HDMI"
          },
          "data_rate_mbps": { "type": "number" },
          "manufacturer": { "type": "string" },
          "part_number": { "type": "string" },
          "cost_usd": { "type": "number", "minimum": 0 },
          "availability": {
            "type": "string",
            "enum": ["in-stock", "on-order", "unavailable", "discontinued"]
          },
          "notes": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "accessories": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "category", "weight_g"],
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "category": {
            "type": "string",
            "description": "e.g., propeller, antenna, mount, cable, case"
          },
          "weight_g": { "type": "number", "minimum": 0 },
          "dimensions_mm": {
            "type": "object",
            "properties": {
              "length": { "type": "number" },
              "width": { "type": "number" },
              "height": { "type": "number" }
            }
          },
          "material": { "type": "string" },
          "compatible_with": {
            "type": "array",
            "items": { "type": "string" },
            "description": "IDs of compatible parts"
          },
          "manufacturer": { "type": "string" },
          "part_number": { "type": "string" },
          "cost_usd": { "type": "number", "minimum": 0 },
          "availability": {
            "type": "string",
            "enum": ["in-stock", "on-order", "unavailable", "discontinued"]
          },
          "notes": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } }
        }
      }
    }
  }
}
